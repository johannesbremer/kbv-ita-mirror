<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<artifactId>xpm-dmp-bkr</artifactId>
	<version>2026.1.0</version>
	<parent>
		<groupId>de.kbv.xpm</groupId>
		<artifactId>xpm-parent</artifactId>
		<version>0.0.13</version>
	</parent>

	<properties>
		<!-- !!! ANPASSEN !!! -->
		<quartalVar>1</quartalVar>
		<jahrVar>2026</jahrVar>
		<xpmStammdatenVersion>${jahrVar}.${quartalVar}.0</xpmStammdatenVersion>
		<!-- !!!!TODO: Da noch keine SD f체r 318 da sind noch die aus 218 nehmen-->
		<!--  <xpmStammdatenVersion>2024.3.0</xpmStammdatenVersion> --> 
		<xpmCoreVersion>4.2.38</xpmCoreVersion>
		<xpmCommonFilesVersion>1.1.6</xpmCommonFilesVersion>

		<pruefmodulTyp>Brustkrebs</pruefmodulTyp>
		<modulDataContainerName>kbv_tabelle</modulDataContainerName>
		<project.build.sourceEncoding>iso-8859-1</project.build.sourceEncoding>
		<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
		<maven.compiler.source>17</maven.compiler.source>
		<maven.compiler.target>17</maven.compiler.target>
		<maven.build.timestamp.format>yyyyMMdd'T'HHmmss</maven.build.timestamp.format>
	</properties>
	<profiles>
		<profile>
			<!-- mvn package -Pgenerate-stamm-all | mvn package -P!generate-stamm-all -->
			<id>bkr-profil</id>
			<activation>
				<activeByDefault>true</activeByDefault>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>exec-maven-plugin</artifactId>
						<version>1.6.0</version>
						<executions>
							<!-- muss nur aktiviert werden wenn sich Stammdateien, Jasper Reports, 
								XPMAdapter Klasse, oder XDT-Schema ge채ndert haben -->
							<execution>
								<id>build-stamm-haupt</id>
								<phase>process-classes</phase>
								<goals>
									<goal>exec</goal>
								</goals>
								<configuration>
									<executable>java</executable>
									<arguments> <!-- <argument>-Dencoding=ISO-8859-1</argument> --> <!-- -->
										<argument>-Dfile.encoding=ISO-8859-1</argument>
										--&gt; <!-- <argument>-Dfile.encoding=UTF-8</argument> -->
										<argument>-classpath</argument>
										<!-- automatically creates the classpath using all project dependencies, 
											also adding the project build directory -->
										<classpath />
										<argument>de.kbv.xpm.modul.dmp.bkr.generate.Generate</argument>
										<argument>${project.basedir}/src/main/buildResources/Profile.xml</argument>
									</arguments>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-compiler-plugin</artifactId>
                      	<version>3.12.1</version>
                        <executions>
							<!-- nach dem die XDT-Reader Klasse aus dem XML-Schema generiert wurde 
								muss diese noch kompiliert werden -->
							<execution>
								<id>recompile</id>
								<phase>generate-test-resources</phase>
								<goals>
									<goal>compile</goal>
								</goals>
								<configuration>
									<!-- includes> <include>**/XDTReader.java</include> </includes> -->
								</configuration>
							</execution>
						</executions>
					</plugin>

					<plugin>
						<artifactId>maven-assembly-plugin</artifactId>
						<version>3.6.0</version>
						<executions>
							<execution>
								<id>make-assembly-Beispieldateien-Zip-File</id>
								<phase>package</phase>
								<goals>
									<goal>single</goal>
								</goals>
								<configuration>
									<descriptors>
										<descriptor>src/main/buildResources/assemblyBkrDatenZip.xml</descriptor>
									</descriptors>
									<appendAssemblyId>false</appendAssemblyId>
									<attach>false</attach>
									<finalName>278012389_${jahrVar}${quartalmonth}15181818_1_BK_425</finalName>
								</configuration>
							</execution>
							<!-- Zip erstellen -->
							<execution>
								<id>make-assembly-Gesamt-Zip-File</id>
								<phase>package</phase>
								<goals>
									<goal>single</goal>
								</goals>
								<configuration>
									<descriptors><descriptor>src/main/buildResources/assembly_bkr_Zip.xml</descriptor></descriptors>
									<appendAssemblyId>false</appendAssemblyId>
									<attach>false</attach>
									<finalName>${project.artifactId}-${project.version}</finalName>
								</configuration>
							</execution>
						</executions>
					</plugin>
          			<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>build-helper-maven-plugin</artifactId>
						<version>3.0.0</version>
						<executions>
							<execution>
								<id>attach-artifacts</id>
								<phase>package</phase>
								<goals>
									<goal>attach-artifact</goal>
								</goals>
								<configuration>
									<artifacts>
										<artifact>
											<file>target/${project.name}-${project.version}.zip</file>
											<type>zip</type>
											<classifier>zipArchive</classifier>
										</artifact>
									</artifacts>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>com.google.code.maven-replacer-plugin</groupId>
						<artifactId>replacer</artifactId>
						<version>1.5.3</version>
						<executions>
							<execution>
								<id>replace-beispieldateien</id>
								<phase>compile</phase>
								<goals>
									<goal>replace</goal>
								</goals>
								<configuration>
									<ignoreMissingFile>false</ignoreMissingFile>
									<filesToInclude>${project.build.directory}/278012389_1234567_20250312.FBK,
										${project.build.directory}/278012389_1234567_20241012.EBK
									</filesToInclude>
									<replacements>
										<replacement>
											<token>2025-03</token>
											<value>${jahrVar}-${quartalmonth}</value>
										</replacement>
										<replacement>
											<token>2024-10</token>
											<value>${jahrVar}-${quartalmonth}</value>
										</replacement>
									</replacements>
								</configuration>
							</execution>
							<execution>
								<id>replace-batchdateien-dates</id>
								<phase>compile</phase>
								<goals>
									<goal>replace</goal>
								</goals>
								<configuration>
									<ignoreMissingFile>false</ignoreMissingFile>
									<filesToInclude>${project.build.directory}/scripte/StartPruefmodulFD.bat,
										${project.build.directory}/scripte/StartPruefmodulED.bat,
										${project.build.directory}/scripte/StartPruefmodulFD.sh,
										${project.build.directory}/scripte/StartPruefmodulED.sh,
										${project.build.directory}/scripte/EinzelPruefungFD.bat,
										${project.build.directory}/scripte/EinzelPruefungFD.sh,
										${project.build.directory}/scripte/EinzelPruefungED.bat,
										${project.build.directory}/scripte/EinzelPruefungED.sh,
										${project.build.directory}/scripte/ArchivPruefung.bat,
										${project.build.directory}/scripte/ArchivPruefung.sh
									</filesToInclude>
									<replacements>
										<replacement>
											<token>20241012</token>
											<value>${jahrVar}${quartalmonth}12</value>
										</replacement>
										<replacement>
											<token>20250312</token>
											<value>${jahrVar}${quartalmonth}12</value>
										</replacement>
										<replacement>
											<token>20230115</token>
											<value>${jahrVar}${quartalmonth}15</value>
										</replacement>
									</replacements>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>


		<profile>
			<!-- mvn package -Pgenerate-stamm-all | mvn package -P!generate-stamm-all -->
			<id>bkr-A-profil</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>exec-maven-plugin</artifactId>
						<version>1.6.0</version>
						<executions>
							<!-- muss nur aktiviert werden wenn sich Stammdateien, Jasper Reports, 
								XPMAdapter Klasse, oder XDT-Schema ge채ndert haben -->
							<execution>
								<id>build-stamm-haupt-A</id>
								<phase>process-classes</phase>
								<goals>
									<goal>exec</goal>
								</goals>
								<configuration>
									<executable>java</executable>
									<arguments> <!-- <argument>-Dencoding=ISO-8859-1</argument> --> <!-- -->
										<argument>-Dfile.encoding=ISO-8859-1</argument>
										--&gt; <!-- <argument>-Dfile.encoding=UTF-8</argument> -->
										<argument>-classpath</argument>
										<!-- automatically creates the classpath using all project dependencies, 
											also adding the project build directory -->
										<classpath />
										<argument>de.kbv.xpm.modul.dmp.bkr.generate.GenerateASatz</argument>
										<argument>${project.basedir}/src/main/buildResources/Profile_A.xml</argument>
									</arguments>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-compiler-plugin</artifactId>
                      	<version>3.12.1</version>
                        <executions>
							<!-- nach dem die XDT-Reader Klasse aus dem XML-Schema generiert wurde 
								muss diese noch kompiliert werden -->
							<execution>
								<id>recompile-A</id>
								<phase>generate-test-resources</phase>
								<goals>
									<goal>compile</goal>
								</goals>
								<configuration>
									<!-- includes> <include>**/XDTReader.java</include> </includes> -->
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<artifactId>maven-assembly-plugin</artifactId>
						<version>3.6.0</version>
						<executions>
							<execution>
								<id>make-assembly-Beispieldateien-A-Zip-File</id>
								<phase>package</phase>
								<goals>
									<goal>single</goal>
								</goals>
								<configuration>
									<descriptors><descriptor>src/main/buildResources/assemblyBkrDatenAZip.xml</descriptor></descriptors>
									<appendAssemblyId>false</appendAssemblyId>
									<attach>false</attach>
									<finalName>278012389_${jahrVar}${quartalmonth}02181818_1_BK_425</finalName>
								</configuration>
							</execution>
							<!-- Zip erstellen -->
							<execution>
								<id>make-assembly-A</id>
								<phase>package</phase>
								<goals>
									<goal>single</goal>
								</goals>
								<configuration>
									<descriptors><descriptor>src/main/buildResources/assembly_bkr_A_Zip.xml</descriptor></descriptors>
									<appendAssemblyId>false</appendAssemblyId>
									<attach>false</attach>
									<finalName>${project.artifactId}-A-${project.version}</finalName>
								</configuration>
							</execution>
						</executions>
					</plugin>
          			<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>build-helper-maven-plugin</artifactId>
						<version>3.0.0</version>
						<executions>
							<execution>
								<id>attach-artifacts</id>
								<phase>package</phase>
								<goals>
									<goal>attach-artifact</goal>
								</goals>
								<configuration>
									<artifacts>
										<artifact>
											<file>target/${project.name}-A-${project.version}.zip</file>
											<type>zip</type>
											<classifier>zipArchive_A</classifier>
										</artifact>
									</artifacts>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>com.google.code.maven-replacer-plugin</groupId>
						<artifactId>replacer</artifactId>
						<version>1.5.3</version>
						<executions>
							<execution>
								<id>replace-beispieldateien-a</id>
								<phase>compile</phase>
								<goals>
									<goal>replace</goal>
								</goals>
								<configuration>
									<ignoreMissingFile>false</ignoreMissingFile>
									<filesToInclude>
										${project.build.directory}/278012389_1234567_20241012_4a.EBK,
										${project.build.directory}/278012389_1234567_20250302_4a.FBK
									</filesToInclude>
									<replacements>
										<replacement>
											<token>2025-03</token>
											<value>${jahrVar}-${quartalmonth}</value>
										</replacement>
										<replacement>
											<token>2024-10</token>
											<value>${jahrVar}-${quartalmonth}</value>
										</replacement>
									</replacements>
								</configuration>
							</execution>
							<execution>
								<id>replace-batchdateien-konvertiere-zu-asatz-batchdatei</id>
								<phase>compile</phase>
								<goals>
									<goal>replace</goal>
								</goals>
								<configuration>
									<ignoreMissingFile>false</ignoreMissingFile>
									<filesToInclude>${project.build.directory}/a-scripte/StartPruefmodulFD.bat,
										${project.build.directory}/a-scripte/StartPruefmodulED.bat,
										${project.build.directory}/a-scripte/StartPruefmodulFD.sh,
										${project.build.directory}/a-scripte/StartPruefmodulED.sh,
										${project.build.directory}/a-scripte/EinzelPruefungFD.bat,
										${project.build.directory}/a-scripte/EinzelPruefungFD.sh,
										${project.build.directory}/a-scripte/EinzelPruefungED.bat,
										${project.build.directory}/a-scripte/EinzelPruefungED.sh,
										${project.build.directory}/a-scripte/ArchivPruefung.bat,
										${project.build.directory}/a-scripte/ArchivPruefung.sh
									</filesToInclude>
									<replacements>
										<replacement>
											<token>20241012</token>
											<value>${jahrVar}${quartalmonth}12</value>
										</replacement>
										<replacement>
											<token>20250302</token>
											<value>${jahrVar}${quartalmonth}02</value>
										</replacement>
										<replacement>
											<token>20240502</token>
											<value>${jahrVar}${quartalmonth}02</value>
										</replacement>
									</replacements>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>


	</profiles>
	<build>
		<resources>
			<resource>
				<directory>${project.basedir}/src/main/scripte</directory>
				<filtering>true</filtering>
				<targetPath>../scripte</targetPath>
			</resource>
			<resource>
				<directory>${project.basedir}/src/main/a-scripte</directory>
				<filtering>true</filtering>
				<targetPath>../a-scripte</targetPath>
			</resource>
			<resource>
				<directory>${project.basedir}/src/main/resources</directory>
				<filtering>true</filtering>
			</resource>
			<resource>
				<directory>${project.basedir}/src/main/buildResources</directory>
				<includes>
					<include>releaseNotes/*.*</include>
					<include>releaseNotesA/*.*</include>
					<include>Meldungen.xml</include>
					<include>MeldungenA.xml</include>
				</includes>
				<filtering>true</filtering>
				<targetPath>../</targetPath>
			</resource>
		</resources>
		<plugins>
			<plugin>
				<!-- Vor dem generieren m체ssen die gemeinsamen Daten von praxis und kV 
					entpackt unter Target liegen -->
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<version>3.1.1</version>
				<executions>
					<execution>
						<id>unpack</id>
						<phase>process-classes</phase>
						<goals>
							<goal>unpack</goal>
						</goals>
						<configuration>
							<artifactItems>
								<artifactItem>
									<groupId>de.kbv.xpm</groupId>
									<artifactId>xpm-stammdaten</artifactId>
									<version>${xpmStammdatenVersion}</version>
									<type>zip</type>
									<classifier>Archive</classifier>
									<overWrite>true</overWrite>
									<outputDirectory>${project.build.directory}/stammdaten</outputDirectory>
								</artifactItem>
								<artifactItem>
									<groupId>de.kbv.xpm</groupId>
									<artifactId>xpm-common-files</artifactId>
									<version>${xpmCommonFilesVersion}</version>
									<type>zip</type>
									<classifier>common_files_xpm</classifier>
									<overWrite>true</overWrite>
									<outputDirectory>${project.build.directory}/common_files_xpm</outputDirectory>
								</artifactItem>
							</artifactItems>
							<overWriteReleases>true</overWriteReleases>
							<overWriteSnapshots>true</overWriteSnapshots>
						</configuration>
					</execution>
					<execution>
						<id>copy-installed</id>
						<phase>package</phase>
						<goals>
							<goal>copy</goal>
						</goals>
						<configuration>
							<artifactItems>
								<artifactItem>
									<groupId>de.kbv.xpm</groupId>
									<artifactId>xpmJavaVersionCheck</artifactId>
									<version>${xpmJavaVersionCheckVersion}</version>
								</artifactItem>
								<artifactItem>
									<groupId>de.kbv.xpm</groupId>
									<artifactId>xpm-core</artifactId>
									<version>${xpmCoreVersion}</version>
								</artifactItem>
								<artifactItem>
									<groupId>de.kbv.xpm</groupId>
									<artifactId>xpm-core</artifactId>
									<classifier>single</classifier>
									<version>${xpmCoreVersion}</version>
								</artifactItem>
								<artifactItem>
									<groupId>net.sf.jasperreports</groupId>
									<artifactId>jasperreports-fonts</artifactId>
									<version>6.12.2</version>
								</artifactItem>
							</artifactItems>
							<useBaseVersion>true</useBaseVersion>
							<outputDirectory>${project.build.directory}</outputDirectory>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<artifactId>maven-assembly-plugin</artifactId>
				<version>3.3.0</version>
				<executions>
					<execution>
						<id>make-bkr-jar</id>
						<phase>package</phase>
						<goals>
							<goal>single</goal>
						</goals>
						<configuration>
							<descriptors><descriptor>src/main/buildResources/assembly_bkr_jar.xml</descriptor></descriptors>
							<appendAssemblyId>false</appendAssemblyId>
							<finalName>${project.artifactId}-${project.version}</finalName>
						</configuration>
					</execution>

				</executions>
			</plugin>
			<plugin>
				<groupId>org.codehaus.groovy.maven</groupId>
				<artifactId>gmaven-plugin</artifactId>
				<version>1.0</version>
				<executions>
					<execution>
						<id>properties_fuer_beispieldateien_setzen</id>
						<phase>validate</phase>
						<configuration>
							<source>
								if (project.properties.quartalVar == "1") {
									project.properties.quartalmonth = "01";
								}
								if (project.properties.quartalVar == "2") {
									project.properties.quartalmonth = "04";
								}
								if (project.properties.quartalVar == "3") {
									project.properties.quartalmonth = "07";
								}
								if (project.properties.quartalVar == "4") {
									project.properties.quartalmonth = "10";
								}
							</source>
						</configuration>
						<goals>
							<goal>execute</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-resources-plugin</artifactId>
				<version>3.3.1</version>
				<configuration>
					<encoding>ISO-8859-1</encoding>
				</configuration>
				<executions>
					<execution>
						<id>copy-beispieldaten-vor-ersetzung</id>
						<phase>validate</phase>
						<goals>
							<goal>copy-resources</goal>
						</goals>
						<configuration>
							<outputDirectory>${basedir}/target</outputDirectory>
							<resources>
								<resource>
									<directory>${basedir}/src/main/buildResources/Daten</directory>
									<includes>
										<include>278012389_1234567_20241012.EBK</include>
										<include>278012389_1234567_20250312.FBK</include>
									</includes>
								</resource>
							</resources>
						</configuration>
					</execution>
					<execution>
						<id>copy-beispieldaten-A-vor-ersetzung</id>
						<phase>validate</phase>
						<goals>
							<goal>copy-resources</goal>
						</goals>
						<configuration>
							<outputDirectory>${basedir}/target</outputDirectory>
							<resources>
								<resource>
									<directory>${basedir}/src/main/buildResources/DatenA</directory>
									<includes>
										<include>278012389_1234567_20241012_4a.EBK</include>
										<include>278012389_1234567_20250302_4a.FBK</include>
									</includes>
								</resource>
							</resources>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-plugin</artifactId>
				<version>2.20</version>
				<configuration>
					<excludes>
						<exclude>**/TestBkrPraxisAufrufe.java</exclude>
					</excludes>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-checkstyle-plugin</artifactId>
				<version>3.3.0</version>
				<configuration>
					<includes>**\/*.sh</includes>
					<includeResources>true</includeResources>
					<resourceIncludes>**\/*.sh</resourceIncludes>
					<configLocation>src/main/buildResources/checkstyle.xml</configLocation>
				</configuration>
				<executions>
					<execution>
						<id>validate</id>
						<phase>validate</phase>
						<configuration>
							<encoding>ISO-8859-1</encoding>
							<consoleOutput>true</consoleOutput>
							<failsOnError>true</failsOnError>
							<linkXRef>false</linkXRef>
						</configuration>
						<goals>
							<goal>check</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
	<dependencies>
		<dependency>
			<groupId>de.kbv.xpm</groupId>
			<artifactId>xpm-core</artifactId>
			<version>${xpmCoreVersion}</version>
		</dependency>
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<version>4.11</version>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>de.kbv.xpm</groupId>
			<artifactId>xpmJavaVersionCheck</artifactId>
			<version>${xpmJavaVersionCheckVersion}</version>
		</dependency>
	</dependencies>

	<scm>
		<url>https://bitbucket.kbv.de/scm/itasw/xpm-dmp-bkr.git</url>
		<connection>scm:git:https://bitbucket.kbv.de/scm/itasw/xpm-dmp-bkr.git</connection>
		<developerConnection>scm:git:https://bitbucket.kbv.de/scm/itasw/xpm-dmp-bkr.git</developerConnection>
	<tag>xpm-dmp-bkr-2026.1.0</tag>
	</scm>

</project>
