{
  "resourceType": "StructureDefinition",
  "id": "KBV-PR-VoS-Prescription",
  "url": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
  "version": "2.2.0",
  "name": "KBV_PR_VoS_Prescription",
  "title": "KBV_PR_VoS_Prescription",
  "status": "draft",
  "date": "2025-10-01",
  "publisher": "Kassenärztliche Bundesvereinigung",
  "description": "Übergabe der Daten einer Verordnung",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "MedicationRequest",
  "baseDefinition": "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_MedicationRequest|1.7.0",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "MedicationRequest",
        "path": "MedicationRequest",
        "constraint": [
          {
            "key": "-erp-begrenzungDate",
            "human": "Begrenzung der Datumsangabe auf 10 Zeichen JJJJ-MM-TT",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "error",
            "expression": "authoredOn.toString().length()=10"
          },
          {
            "key": "-vos-BtM-Rezept-Extension",
            "human": "Die Extension für das BtM-Sonderkennzeichen darf nur bei BtM-Verordnungen verwendet werden.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "error",
            "expression": "extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_Narcotic').exists() implies (extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_VoS_PrescriptionType').value as CodeableConcept).coding.code='BTM-RP'"
          },
          {
            "key": "-vos-T-Rezept-Extension",
            "human": "Die Extension für die T-Rezept-Ankreuzfelder muss genau dann verwendet werden, wenn ein T-Rezept vorliegt.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "error",
            "expression": "extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_Teratogenic').exists().not() xor (extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_VoS_PrescriptionType').value as CodeableConcept).coding.code='T-RP'"
          },
          {
            "key": "-erp-unfalltagDatum",
            "human": "Die Ressource vom Typ MedicationRequest enthält einen Unfalltag, dieser darf nicht nach dem Ausstellungsdatum liegen.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_Accident').extension('Unfalltag').exists() implies (extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_Accident').extension('Unfalltag').value as date) <= authoredOn"
          },
          {
            "key": "-erp-angabeDosierungKennzeichenTrue",
            "human": "Wenn das Dosierungskennzeichen true ist, muss eine Dosieranweisung vorhanden sein.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_DosageFlag').exists().not() or ((extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_DosageFlag').value as boolean)=true implies dosageInstruction.exists())"
          },
          {
            "key": "-erp-angabeDosierungKennzeichenFalse",
            "human": "Wenn das Dosierungskennzeichen false ist, darf keine Dosieranweisung vorhanden sein.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_DosageFlag').exists().not() or ((extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_DosageFlag').value as boolean)=false implies dosageInstruction.exists().not())"
          },
          {
            "key": "-erp-dosieranweisungFreitextGenerierterTextPflicht",
            "human": "Auch bei einer freitextlichen Angabe der Dosieranweisung, müssen die Extensions für den generierten Text sowie für die Metadaten zum Textgenerierungsalgorithmus angegeben werden.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "dosageInstruction.text.exists() implies extension('http://hl7.org/fhir/5.0/StructureDefinition/extension-MedicationRequest.renderedDosageInstruction').exists() and extension('http://ig.fhir.de/igs/medication/StructureDefinition/GeneratedDosageInstructionsMeta').exists()"
          }
        ]
      },
      {
        "id": "MedicationRequest.id",
        "path": "MedicationRequest.id",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.meta",
        "path": "MedicationRequest.meta",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.meta.source",
        "path": "MedicationRequest.meta.source",
        "max": "0"
      },
      {
        "id": "MedicationRequest.meta.profile",
        "path": "MedicationRequest.meta.profile",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "$this"
            }
          ],
          "rules": "open"
        },
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.meta.profile:vosProfile",
        "path": "MedicationRequest.meta.profile",
        "sliceName": "vosProfile",
        "min": 1,
        "max": "1",
        "fixedCanonical": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription|2.2.0",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.meta.security",
        "path": "MedicationRequest.meta.security",
        "max": "0"
      },
      {
        "id": "MedicationRequest.meta.tag",
        "path": "MedicationRequest.meta.tag",
        "max": "0"
      },
      {
        "id": "MedicationRequest.implicitRules",
        "path": "MedicationRequest.implicitRules",
        "max": "0"
      },
      {
        "id": "MedicationRequest.language",
        "path": "MedicationRequest.language",
        "max": "0"
      },
      {
        "id": "MedicationRequest.contained",
        "path": "MedicationRequest.contained",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension",
        "path": "MedicationRequest.extension",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "url"
            }
          ],
          "description": "Extensions are always sliced by (at least) url",
          "rules": "closed"
        },
        "min": 4,
        "max": "13"
      },
      {
        "id": "MedicationRequest.extension:Zuzahlungsstatus",
        "path": "MedicationRequest.extension",
        "sliceName": "Zuzahlungsstatus",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_StatusCoPayment"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Zuzahlungsstatus.extension",
        "path": "MedicationRequest.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:Zuzahlungsstatus.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Zuzahlungsstatus.value[x]:valueCoding",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueCoding",
        "type": [
          {
            "code": "Coding"
          }
        ],
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "https://fhir.kbv.de/ValueSet/KBV_VS_ERP_StatusCoPayment"
        }
      },
      {
        "id": "MedicationRequest.extension:Zuzahlungsstatus.value[x]:valueCoding.system",
        "path": "MedicationRequest.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Zuzahlungsstatus.value[x]:valueCoding.code",
        "path": "MedicationRequest.extension.value[x].code",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Notdienstgebuehr",
        "path": "MedicationRequest.extension",
        "sliceName": "Notdienstgebuehr",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_EmergencyServicesFee"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Notdienstgebuehr.extension",
        "path": "MedicationRequest.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:Notdienstgebuehr.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Notdienstgebuehr.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueBoolean",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:SER",
        "path": "MedicationRequest.extension",
        "sliceName": "SER",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_SER"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:SER.extension",
        "path": "MedicationRequest.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:SER.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:SER.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueBoolean",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen",
        "path": "MedicationRequest.extension",
        "sliceName": "Unfallinformationen",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_Accident"
            ]
          }
        ],
        "constraint": [
          {
            "key": "-erp-angabeUnfallbetriebPflicht",
            "human": "Die Ressource vom Typ MedicationRequest enthält keinen Namen des Unfallbetriebs, dieser ist aber Pflicht falls ein Unfallkennzeichen mit dem Wert \"2\" (Arbeitsunfall) angegeben ist.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "(extension('Unfallkennzeichen').value as Coding).code = '2' implies extension('Unfallbetrieb').exists()"
          },
          {
            "key": "-erp-angabeUnfallbetriebVerbot",
            "human": "Die Ressource vom Typ MedicationRequest enthält einen Namen des Unfallbetriebs, dieser darf aber nicht angegeben werden, falls ein Unfallkennzeichen mit dem Wert ungleich \"2\" (Arbeitsunfall) angegeben ist.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "(extension('Unfallkennzeichen').value as Coding).code != '2' implies extension('Unfallbetrieb').exists().not()"
          },
          {
            "key": "-erp-angabeUnfalltagPflicht",
            "human": "Die Ressource vom Typ MedicationRequest enthält keinen Unfalltag, dieser ist aber Pflicht falls ein Unfallkennzeichen mit dem Wert \"1\" (Unfall) oder \"2\" (Arbeitsunfall) angegeben ist.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "((extension('Unfallkennzeichen').value as Coding).code = '1' or (extension('Unfallkennzeichen').value as Coding).code = '2') implies extension('Unfalltag').exists()"
          },
          {
            "key": "-erp-angabeUnfalltagVerbot",
            "human": "Die Ressource vom Typ MedicationRequest enthält einen Unfalltag, dieser darf aber nicht angegeben werden, falls ein Unfallkennzeichen mit dem Wert ungleich \"1\" (Unfall) oder ungleich \"2\" (Arbeitsunfall) angegeben ist.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "(extension('Unfallkennzeichen').value as Coding).code != '1' and (extension('Unfallkennzeichen').value as Coding).code != '2' implies extension('Unfalltag').exists().not()"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallkennzeichen",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "Unfallkennzeichen",
        "definition": "Dieses Feld enthält die Information, in welchem Zusammenhang die Verordnung ausgestellt wurde, z.B. Unfall.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallkennzeichen.extension",
        "path": "MedicationRequest.extension.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallkennzeichen.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallkennzeichen.value[x]:valueCoding",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueCoding",
        "type": [
          {
            "code": "Coding"
          }
        ],
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "https://fhir.kbv.de/ValueSet/KBV_VS_ERP_Accident_Type"
        }
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallkennzeichen.value[x]:valueCoding.system",
        "path": "MedicationRequest.extension.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallkennzeichen.value[x]:valueCoding.code",
        "path": "MedicationRequest.extension.extension.value[x].code",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallbetrieb",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "Unfallbetrieb",
        "short": "Unfallbetrieb",
        "definition": "Dieses Feld enthält den Namen des Arbeitgebers oder Dienstherrn, in dessen Einflussbereich sich der Unfall (auch Wegeunfall) ereignete.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallbetrieb.extension",
        "path": "MedicationRequest.extension.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallbetrieb.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfallbetrieb.value[x]:valueString",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueString",
        "type": [
          {
            "code": "string"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfalltag",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "Unfalltag",
        "short": "Unfalltag",
        "definition": "Dieses Feld enthält das Datum des Unfallereignisses, das Ursache für die Verordnung ist.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfalltag.extension",
        "path": "MedicationRequest.extension.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfalltag.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Unfallinformationen.extension:Unfalltag.value[x]:valueDate",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueDate",
        "min": 1,
        "type": [
          {
            "code": "date"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:rechtsgrundlage",
        "path": "MedicationRequest.extension",
        "sliceName": "rechtsgrundlage",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_Legal_basis"
            ]
          }
        ],
        "mustSupport": true,
        "isModifier": false
      },
      {
        "id": "MedicationRequest.extension:rechtsgrundlage.extension",
        "path": "MedicationRequest.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:rechtsgrundlage.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:rechtsgrundlage.value[x]:valueCoding",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueCoding",
        "type": [
          {
            "code": "Coding"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Rezepttyp",
        "path": "MedicationRequest.extension",
        "sliceName": "Rezepttyp",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_VoS_PrescriptionType"
            ]
          }
        ],
        "mustSupport": true,
        "isModifier": false
      },
      {
        "id": "MedicationRequest.extension:Rezepttyp.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Rezepttyp.value[x]:valueCodeableConcept",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueCodeableConcept",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Rezepttyp.value[x]:valueCodeableConcept.coding",
        "path": "MedicationRequest.extension.value[x].coding",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Rezepttyp.value[x]:valueCodeableConcept.coding.system",
        "path": "MedicationRequest.extension.value[x].coding.system",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Rezepttyp.value[x]:valueCodeableConcept.coding.code",
        "path": "MedicationRequest.extension.value[x].coding.code",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Rezepttyp.value[x]:valueCodeableConcept.coding.userSelected",
        "path": "MedicationRequest.extension.value[x].coding.userSelected",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:VerschreiberID",
        "path": "MedicationRequest.extension",
        "sliceName": "VerschreiberID",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_Prescriber_ID"
            ]
          }
        ],
        "mustSupport": true,
        "isModifier": false
      },
      {
        "id": "MedicationRequest.extension:VerschreiberID.extension",
        "path": "MedicationRequest.extension.extension",
        "max": "0"
      },
      {
        "id": "MedicationRequest.extension:VerschreiberID.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:VerschreiberID.value[x]:valueIdentifier",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueIdentifier",
        "type": [
          {
            "code": "Identifier"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:VerschreiberID.value[x]:valueIdentifier.value",
        "path": "MedicationRequest.extension.value[x].value",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:PatientenID",
        "path": "MedicationRequest.extension",
        "sliceName": "PatientenID",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_Patient_ID"
            ]
          }
        ],
        "mustSupport": true,
        "isModifier": false
      },
      {
        "id": "MedicationRequest.extension:PatientenID.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:PatientenID.value[x]:valueIdentifier",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueIdentifier",
        "type": [
          {
            "code": "Identifier"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:PatientenID.value[x]:valueIdentifier.value",
        "path": "MedicationRequest.extension.value[x].value",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel",
        "path": "MedicationRequest.extension",
        "sliceName": "Betaeubungsmittel",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_Narcotic"
            ]
          }
        ],
        "mustSupport": true,
        "isModifier": false
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:BtM-Sonderkennzeichen",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "BtM-Sonderkennzeichen",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:BtM-Sonderkennzeichen.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:BtM-Sonderkennzeichen.value[x]:valueCoding",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueCoding",
        "type": [
          {
            "code": "Coding"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:BtM-Sonderkennzeichen.value[x]:valueCoding.system",
        "path": "MedicationRequest.extension.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:BtM-Sonderkennzeichen.value[x]:valueCoding.code",
        "path": "MedicationRequest.extension.extension.value[x].code",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:ErgaenzendeAngabenSubstitutionsmittel",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "ErgaenzendeAngabenSubstitutionsmittel",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:ErgaenzendeAngabenSubstitutionsmittel.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Betaeubungsmittel.extension:ErgaenzendeAngabenSubstitutionsmittel.value[x]:valueString",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueString",
        "type": [
          {
            "code": "string"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept",
        "path": "MedicationRequest.extension",
        "sliceName": "T-Rezept",
        "short": "T-Rezept",
        "definition": "Abbildung der Angaben zur Verordnung eines teratogenen Arzneimittels (T-Rezept)",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_Teratogenic"
            ]
          }
        ],
        "mustSupport": true,
        "isModifier": false
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:Off-Label",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "Off-Label",
        "definition": "Übertragung der Ausprägung des vierten Ankreuzfeldes, dass die Behandlung außerhalb der zugelassenen Anwendungsgebiete erfolgt. true = Off-Label. false = In-Label.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:Off-Label.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:Off-Label.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueBoolean",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:Off-Label.value[x]:valueBoolean.value",
        "path": "MedicationRequest.extension.extension.value[x].value",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:GebaerfaehigeFrau",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "GebaerfaehigeFrau",
        "definition": "T-Rezepte dürfen für Frauen im gebärfähigen Alter ausgestellt werden.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:GebaerfaehigeFrau.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:GebaerfaehigeFrau.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueBoolean",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:GebaerfaehigeFrau.value[x]:valueBoolean.value",
        "path": "MedicationRequest.extension.extension.value[x].value",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:EinhaltungSicherheitsmassnahmen",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "EinhaltungSicherheitsmassnahmen",
        "definition": "Der Arzt kreuzt auf dem Rezept an, dass alle Sicherheitsbestimmungen eingehalten werden und die Patienten über die Gefahren aufgeklärt wurden, einschließlich des möglichen Programms zur Schwangerschaftsprävention.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:EinhaltungSicherheitsmassnahmen.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:EinhaltungSicherheitsmassnahmen.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueBoolean",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:EinhaltungSicherheitsmassnahmen.value[x]:valueBoolean.value",
        "path": "MedicationRequest.extension.extension.value[x].value",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:AushaendigungInformationsmaterialien",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "AushaendigungInformationsmaterialien",
        "definition": "Die Behandelnde Person bestätigt auf dem T-Rezept, dass dem Patienten alle nötigen Informationen ausgehändigt wurden und die medizinischen Informationsmaterialien berücksichtigt wurden.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:AushaendigungInformationsmaterialien.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:AushaendigungInformationsmaterialien.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueBoolean",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:AushaendigungInformationsmaterialien.value[x]:valueBoolean.value",
        "path": "MedicationRequest.extension.extension.value[x].value",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:ErklaerungSachkenntnis",
        "path": "MedicationRequest.extension.extension",
        "sliceName": "ErklaerungSachkenntnis",
        "definition": "Der verordnende Arzt bestätigt mit dem T-Rezept, dass er über die notwendige Kenntnis der Risiken und der besonderen Sicherheitsmaßnahmen für diese Medikamente verfügt. Er verpflichtet sich, alle gesetzlich vorgeschriebenen Maßnahmen einzuhalten, insbesondere die Einhaltung von Sicherheitsbestimmungen und die Aushändigung von medizinischem Informationsmaterial an den Patienten.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:ErklaerungSachkenntnis.value[x]",
        "path": "MedicationRequest.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:ErklaerungSachkenntnis.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.extension.value[x]",
        "sliceName": "valueBoolean",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:T-Rezept.extension:ErklaerungSachkenntnis.value[x]:valueBoolean.value",
        "path": "MedicationRequest.extension.extension.value[x].value",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Dosierungskennzeichen",
        "path": "MedicationRequest.extension",
        "sliceName": "Dosierungskennzeichen",
        "short": "Dosierkennzeichen",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_ERP_DosageFlag"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Dosierungskennzeichen.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:Dosierungskennzeichen.value[x]:valueBoolean",
        "path": "MedicationRequest.extension.value[x]",
        "sliceName": "valueBoolean",
        "definition": "Abbildung, ob eine Dosierungsanweisung in der Verordung angegeben ist true - Dosierung gemäß Angaben in dieser Verordnung (dosageInstruction.text) false - Dosieranweisung/Medikationsplan mitgegeben.",
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:renderedDosageInstruction",
        "path": "MedicationRequest.extension",
        "sliceName": "renderedDosageInstruction",
        "short": "Dosierungsanweisung",
        "definition": "Diese R5-Backport-Extension enthält die gerenderten Dosierungsanweisungen für den Patienten, um eine klare und verständliche Einnahmeanweisung bereitzustellen.",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/5.0/StructureDefinition/extension-MedicationRequest.renderedDosageInstruction"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.extension:renderedDosageInstruction.value[x]",
        "path": "MedicationRequest.extension.value[x]",
        "short": "Hinweis: In der ersten Ausbaustufe des dgMP ist nur einfacher Text (String) zulässig; Markdown wird nicht unterstützt.",
        "definition": "Abweichend von FHIR R5 (Typ Markdown) darf in der ersten Ausbaustufe des dgMP ausschließlich Klartext ohne Markdown-Formatierungen (z. B. Überschriften, Listen, Links) geliefert werden."
      },
      {
        "id": "MedicationRequest.extension:generatedDosageInstructionsMeta",
        "path": "MedicationRequest.extension",
        "sliceName": "generatedDosageInstructionsMeta",
        "short": "Metadaten zu den generierten Dosierungsanweisungen",
        "definition": "Diese Extension enthält zusätzliche Metadaten zu den automatisch generierten Dosierungsanweisungen, wie z.B. Informationen zur Generierung oder zum Ursprung der Daten.",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://ig.fhir.de/igs/medication/StructureDefinition/GeneratedDosageInstructionsMeta"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.identifier",
        "path": "MedicationRequest.identifier",
        "max": "0"
      },
      {
        "id": "MedicationRequest.status",
        "path": "MedicationRequest.status",
        "fixedCode": "active",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.statusReason",
        "path": "MedicationRequest.statusReason",
        "max": "0"
      },
      {
        "id": "MedicationRequest.intent",
        "path": "MedicationRequest.intent",
        "fixedCode": "order",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.category",
        "path": "MedicationRequest.category",
        "max": "0"
      },
      {
        "id": "MedicationRequest.priority",
        "path": "MedicationRequest.priority",
        "max": "0"
      },
      {
        "id": "MedicationRequest.doNotPerform",
        "path": "MedicationRequest.doNotPerform",
        "max": "0"
      },
      {
        "id": "MedicationRequest.reported[x]",
        "path": "MedicationRequest.reported[x]",
        "max": "0"
      },
      {
        "id": "MedicationRequest.medication[x]",
        "path": "MedicationRequest.medication[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "closed"
        },
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_FreeText|2.2.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_Compounding|2.2.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_PZN|2.2.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_Ingredient|2.2.0"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.medication[x]:medicationReference",
        "path": "MedicationRequest.medication[x]",
        "sliceName": "medicationReference",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_FreeText|2.2.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_Compounding|2.2.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_PZN|2.2.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Medication_Ingredient|2.2.0"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.medication[x]:medicationReference.reference",
        "path": "MedicationRequest.medication[x].reference",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.medication[x]:medicationReference.type",
        "path": "MedicationRequest.medication[x].type",
        "max": "0"
      },
      {
        "id": "MedicationRequest.medication[x]:medicationReference.identifier",
        "path": "MedicationRequest.medication[x].identifier",
        "max": "0"
      },
      {
        "id": "MedicationRequest.medication[x]:medicationReference.display",
        "path": "MedicationRequest.medication[x].display",
        "max": "0"
      },
      {
        "id": "MedicationRequest.subject",
        "path": "MedicationRequest.subject",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Patient|2.2.0"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.subject.reference",
        "path": "MedicationRequest.subject.reference",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.subject.type",
        "path": "MedicationRequest.subject.type",
        "max": "0"
      },
      {
        "id": "MedicationRequest.subject.identifier",
        "path": "MedicationRequest.subject.identifier",
        "max": "0"
      },
      {
        "id": "MedicationRequest.subject.display",
        "path": "MedicationRequest.subject.display",
        "max": "0"
      },
      {
        "id": "MedicationRequest.encounter",
        "path": "MedicationRequest.encounter",
        "max": "0"
      },
      {
        "id": "MedicationRequest.supportingInformation",
        "path": "MedicationRequest.supportingInformation",
        "max": "0"
      },
      {
        "id": "MedicationRequest.authoredOn",
        "path": "MedicationRequest.authoredOn",
        "definition": "Ausstellungsdatum der Verordnung",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.requester",
        "path": "MedicationRequest.requester",
        "definition": "Verweis auf die PractitionerRole. Beinhaltet somit Informationen zu Betriebsstätte und behandelnder Person und ggfs. die ASV-Teamnummer in ASV-Fällen.",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_PractitionerRole|2.2.0"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.requester.reference",
        "path": "MedicationRequest.requester.reference",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.requester.type",
        "path": "MedicationRequest.requester.type",
        "max": "0"
      },
      {
        "id": "MedicationRequest.requester.identifier",
        "path": "MedicationRequest.requester.identifier",
        "max": "0"
      },
      {
        "id": "MedicationRequest.requester.display",
        "path": "MedicationRequest.requester.display",
        "max": "0"
      },
      {
        "id": "MedicationRequest.performer",
        "path": "MedicationRequest.performer",
        "max": "0"
      },
      {
        "id": "MedicationRequest.performerType",
        "path": "MedicationRequest.performerType",
        "max": "0"
      },
      {
        "id": "MedicationRequest.recorder",
        "path": "MedicationRequest.recorder",
        "max": "0"
      },
      {
        "id": "MedicationRequest.reasonCode",
        "path": "MedicationRequest.reasonCode",
        "max": "0"
      },
      {
        "id": "MedicationRequest.reasonReference",
        "path": "MedicationRequest.reasonReference",
        "max": "0"
      },
      {
        "id": "MedicationRequest.instantiatesCanonical",
        "path": "MedicationRequest.instantiatesCanonical",
        "max": "0"
      },
      {
        "id": "MedicationRequest.instantiatesUri",
        "path": "MedicationRequest.instantiatesUri",
        "max": "0"
      },
      {
        "id": "MedicationRequest.basedOn",
        "path": "MedicationRequest.basedOn",
        "short": "eMP-Identifier",
        "definition": "Identifikator des Eintrags im eMP (elektronischer Medikationsplan) des Versicherten, der dieser Verordnung zugrunde liegt.",
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.basedOn.reference",
        "path": "MedicationRequest.basedOn.reference",
        "max": "0"
      },
      {
        "id": "MedicationRequest.basedOn.type",
        "path": "MedicationRequest.basedOn.type",
        "max": "0"
      },
      {
        "id": "MedicationRequest.basedOn.identifier",
        "path": "MedicationRequest.basedOn.identifier",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.basedOn.identifier.use",
        "path": "MedicationRequest.basedOn.identifier.use",
        "max": "0"
      },
      {
        "id": "MedicationRequest.basedOn.identifier.type",
        "path": "MedicationRequest.basedOn.identifier.type",
        "max": "0"
      },
      {
        "id": "MedicationRequest.basedOn.identifier.system",
        "path": "MedicationRequest.basedOn.identifier.system",
        "min": 1,
        "fixedUri": "https://gematik.de/fhir/sid/emp-identifier",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.basedOn.identifier.value",
        "path": "MedicationRequest.basedOn.identifier.value",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.basedOn.identifier.period",
        "path": "MedicationRequest.basedOn.identifier.period",
        "max": "0"
      },
      {
        "id": "MedicationRequest.basedOn.identifier.assigner",
        "path": "MedicationRequest.basedOn.identifier.assigner",
        "max": "0"
      },
      {
        "id": "MedicationRequest.basedOn.display",
        "path": "MedicationRequest.basedOn.display",
        "max": "0"
      },
      {
        "id": "MedicationRequest.groupIdentifier",
        "path": "MedicationRequest.groupIdentifier",
        "short": "Rezept-Gruppierung",
        "definition": "Ein Identifikator, der zur Gruppierung von MedicationRequest-Ressourcen verwendet wird, welche auf einem Papier-Rezept zusammen gedruckt werden. Papiergebundene Verordnungen, die zusammen auf einem Rezeptformular gedruckt werden, besitzen den gleichen groupIdentifier. Wird jede papiergebundene Verordnung auf einem eigenen Rezeptformular gedruckt, so besitzen alle MedicationRequest-Ressourcen verschiedene groupIdentifier.",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.groupIdentifier.use",
        "path": "MedicationRequest.groupIdentifier.use",
        "max": "0"
      },
      {
        "id": "MedicationRequest.groupIdentifier.type",
        "path": "MedicationRequest.groupIdentifier.type",
        "max": "0"
      },
      {
        "id": "MedicationRequest.groupIdentifier.system",
        "path": "MedicationRequest.groupIdentifier.system",
        "max": "0"
      },
      {
        "id": "MedicationRequest.groupIdentifier.value",
        "path": "MedicationRequest.groupIdentifier.value",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.groupIdentifier.period",
        "path": "MedicationRequest.groupIdentifier.period",
        "max": "0"
      },
      {
        "id": "MedicationRequest.groupIdentifier.assigner",
        "path": "MedicationRequest.groupIdentifier.assigner",
        "max": "0"
      },
      {
        "id": "MedicationRequest.courseOfTherapyType",
        "path": "MedicationRequest.courseOfTherapyType",
        "max": "0"
      },
      {
        "id": "MedicationRequest.insurance",
        "path": "MedicationRequest.insurance",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage|2.2.0"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.insurance.reference",
        "path": "MedicationRequest.insurance.reference",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.insurance.type",
        "path": "MedicationRequest.insurance.type",
        "max": "0"
      },
      {
        "id": "MedicationRequest.insurance.identifier",
        "path": "MedicationRequest.insurance.identifier",
        "max": "0"
      },
      {
        "id": "MedicationRequest.insurance.display",
        "path": "MedicationRequest.insurance.display",
        "max": "0"
      },
      {
        "id": "MedicationRequest.note",
        "path": "MedicationRequest.note",
        "max": "1",
        "constraint": [
          {
            "key": "-erp-begrenzungText",
            "human": "Der Abgabehinweise darf aus maximal 500 Zeichen bestehen.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "text.toString().length() <= 500"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.note.author[x]",
        "path": "MedicationRequest.note.author[x]",
        "max": "0"
      },
      {
        "id": "MedicationRequest.note.author[x]:authorReference",
        "path": "MedicationRequest.note.author[x]",
        "sliceName": "authorReference",
        "max": "0",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Practitioner",
              "http://hl7.org/fhir/StructureDefinition/Patient",
              "http://hl7.org/fhir/StructureDefinition/RelatedPerson",
              "http://hl7.org/fhir/StructureDefinition/Organization",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_Patient|1.7.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_Practitioner|1.7.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_RelatedPerson|1.7.0",
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_Organization|1.7.0"
            ]
          }
        ]
      },
      {
        "id": "MedicationRequest.note.author[x]:authorString",
        "path": "MedicationRequest.note.author[x]",
        "sliceName": "authorString",
        "max": "0",
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "MedicationRequest.note.time",
        "path": "MedicationRequest.note.time",
        "max": "0"
      },
      {
        "id": "MedicationRequest.note.text",
        "path": "MedicationRequest.note.text",
        "definition": "Über die Dosierung hinausgehende Abgabehinweise an die Apotheke",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dosageInstruction",
        "path": "MedicationRequest.dosageInstruction",
        "type": [
          {
            "code": "Dosage",
            "profile": [
              "http://ig.fhir.de/igs/medication/StructureDefinition/DosageDgMP"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest",
        "path": "MedicationRequest.dispenseRequest",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest.initialFill",
        "path": "MedicationRequest.dispenseRequest.initialFill",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.dispenseInterval",
        "path": "MedicationRequest.dispenseRequest.dispenseInterval",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.validityPeriod",
        "path": "MedicationRequest.dispenseRequest.validityPeriod",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.numberOfRepeatsAllowed",
        "path": "MedicationRequest.dispenseRequest.numberOfRepeatsAllowed",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.quantity",
        "path": "MedicationRequest.dispenseRequest.quantity",
        "min": 1,
        "constraint": [
          {
            "key": "-erp-begrenzungValue6",
            "human": "Die Anzahl der verordneten Packungen darf aus maximal 6 Zeichen bestehen.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "value.toString().length() <= 6"
          },
          {
            "key": "-erp-begrenzungIntegerValue",
            "human": "Die Anzahl der verordneten Packungen darf nur aus ganzen Zahlen bestehen und muss größer als 0 sein.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Prescription",
            "severity": "warning",
            "expression": "value.toString().matches('^[1-9][0-9]*$')"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest.quantity.value",
        "path": "MedicationRequest.dispenseRequest.quantity.value",
        "definition": "Anzahl der verordneten Packungen",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest.quantity.unit",
        "path": "MedicationRequest.dispenseRequest.quantity.unit",
        "min": 1,
        "fixedString": "Packung",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest.quantity.system",
        "path": "MedicationRequest.dispenseRequest.quantity.system",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.quantity.code",
        "path": "MedicationRequest.dispenseRequest.quantity.code",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.expectedSupplyDuration",
        "path": "MedicationRequest.dispenseRequest.expectedSupplyDuration",
        "short": "Reichdauer",
        "definition": "In diesem Feld kann bei Betäubungsmitteln die Reichdauer des Substitutionsmittels in Tagen bzw. bei teratogenen Arzneimitteln die Reichdauer in Wochen angegeben werden.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest.expectedSupplyDuration.value",
        "path": "MedicationRequest.dispenseRequest.expectedSupplyDuration.value",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest.expectedSupplyDuration.comparator",
        "path": "MedicationRequest.dispenseRequest.expectedSupplyDuration.comparator",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.expectedSupplyDuration.unit",
        "path": "MedicationRequest.dispenseRequest.expectedSupplyDuration.unit",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.dispenseRequest.expectedSupplyDuration.system",
        "path": "MedicationRequest.dispenseRequest.expectedSupplyDuration.system",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.expectedSupplyDuration.code",
        "path": "MedicationRequest.dispenseRequest.expectedSupplyDuration.code",
        "max": "0"
      },
      {
        "id": "MedicationRequest.dispenseRequest.performer",
        "path": "MedicationRequest.dispenseRequest.performer",
        "max": "0"
      },
      {
        "id": "MedicationRequest.substitution",
        "path": "MedicationRequest.substitution",
        "definition": "Aut-Idem-Kennzeichnung auf Papierrezepten. Darf bei Wirkstoffverordnungen nicht gesetzt werden (AMV-Anforderungskatalog O3-622). Bei allen anderen Verordnungstypen Pflicht.",
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.substitution.allowed[x]",
        "path": "MedicationRequest.substitution.allowed[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "closed"
        },
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.substitution.allowed[x]:allowedBoolean",
        "path": "MedicationRequest.substitution.allowed[x]",
        "sliceName": "allowedBoolean",
        "definition": "In diesem Feld wird angegeben, ob das Arzneimittel austauschbar ist oder nicht\r\n\r\ntrue:  aut idem möglich (austauschbar) = Kreuz auf Rezept ist NICHT gesetzt;\r\nfalse: aut idem ausgeschlossen (nicht austauschbar) = Kreuz auf Rezept ist gesetzt",
        "min": 1,
        "type": [
          {
            "code": "boolean"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "MedicationRequest.substitution.reason",
        "path": "MedicationRequest.substitution.reason",
        "max": "0"
      },
      {
        "id": "MedicationRequest.priorPrescription",
        "path": "MedicationRequest.priorPrescription",
        "max": "0"
      },
      {
        "id": "MedicationRequest.detectedIssue",
        "path": "MedicationRequest.detectedIssue",
        "max": "0"
      },
      {
        "id": "MedicationRequest.eventHistory",
        "path": "MedicationRequest.eventHistory",
        "max": "0"
      }
    ]
  }
}
