{
  "resourceType": "StructureDefinition",
  "id": "KBV-PR-VoS-Coverage",
  "url": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
  "version": "2.2.0",
  "name": "KBV_PR_VoS_Coverage",
  "title": "KBV_PR_VoS_Coverage",
  "status": "draft",
  "date": "2025-10-01",
  "publisher": "Kassenärztliche Bundesvereinigung",
  "description": "Übergabe von Informationen zum Kostenträger/ Krankenversicherungsverhältnis vom PVS an die VoS.",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Coverage",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Coverage",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Coverage",
        "path": "Coverage",
        "short": "Kostenträger",
        "definition": "Angaben zum Versicherungsverhältnis der behandelten Person",
        "constraint": [
          {
            "key": "-for-angabeIKzustaendigeKrankenkasseEGK",
            "human": "Das IK der zustaendigen Krankenkasse ist nicht vorhanden, sie ist aber bei den Kostentraegern vom Typ 'GKV', 'BG', 'SKT', 'PKV' oder 'UK' ein Pflichtelement.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "(type.coding.code='GKV' or type.coding.code='BG' or type.coding.code='SKT' or type.coding.code='UK' or type.coding.code='PKV') implies payor.identifier.exists()"
          },
          {
            "key": "-for-angabeVersichertenart",
            "human": "Die Versichertenart ist nicht vorhanden, sie ist aber bei den Kostentraegern vom Typ 'GKV', 'BG', 'SKT', 'PKV' oder 'UK' ein Pflichtelement.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "(type.coding.code='GKV' or type.coding.code='BG' or type.coding.code='SKT' or type.coding.code='UK' or type.coding.code='PKV') implies extension('http://fhir.de/StructureDefinition/gkv/versichertenart').exists()"
          },
          {
            "key": "-for-angabeBesonderePersonengruppePflicht",
            "human": "Die Besondere Personengruppe ist nicht vorhanden, sie ist aber bei den Kostentraegern vom Typ 'GKV', 'BG', 'SKT', 'PKV' oder 'UK' ein Pflichtelement.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "(type.coding.code='GKV' or type.coding.code='BG' or type.coding.code='SKT' or type.coding.code='UK' or type.coding.code='PKV') implies extension('http://fhir.de/StructureDefinition/gkv/besondere-personengruppe').exists()"
          },
          {
            "key": "-for-angabeIKKostentraegerVerbot",
            "human": "Nur wenn der Kostentraeger vom Typ BG oder UK ist, dann kann das IK des Kostentraegers uebertragen werden",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "(type.coding.code='GKV' or type.coding.code='SKT' or type.coding.code='SEL' or type.coding.code='PKV') implies payor.identifier.extension('https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_Alternative_IK').exists().not()"
          },
          {
            "key": "-for-angabeDMP",
            "human": "Das DMP-Kennzeichen ist nicht vorhanden, dieses ist aber bei den Kostentraegern vom Typ 'GKV', 'BG', 'SKT', 'PKV' oder 'UK' ein Pflichtelement.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "(type.coding.code='GKV' or type.coding.code='BG' or type.coding.code='SKT' or type.coding.code='UK' or type.coding.code='PKV') implies extension('http://fhir.de/StructureDefinition/gkv/dmp-kennzeichen').exists()"
          }
        ]
      },
      {
        "id": "Coverage.id",
        "path": "Coverage.id",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.meta",
        "path": "Coverage.meta",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.meta.source",
        "path": "Coverage.meta.source",
        "max": "0"
      },
      {
        "id": "Coverage.meta.profile",
        "path": "Coverage.meta.profile",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "$this"
            }
          ],
          "rules": "open"
        },
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.meta.profile:vosProfile",
        "path": "Coverage.meta.profile",
        "sliceName": "vosProfile",
        "min": 1,
        "max": "1",
        "fixedCanonical": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage|2.2.0",
        "mustSupport": true
      },
      {
        "id": "Coverage.meta.security",
        "path": "Coverage.meta.security",
        "max": "0"
      },
      {
        "id": "Coverage.meta.tag",
        "path": "Coverage.meta.tag",
        "max": "0"
      },
      {
        "id": "Coverage.implicitRules",
        "path": "Coverage.implicitRules",
        "max": "0"
      },
      {
        "id": "Coverage.language",
        "path": "Coverage.language",
        "max": "0"
      },
      {
        "id": "Coverage.contained",
        "path": "Coverage.contained",
        "max": "0"
      },
      {
        "id": "Coverage.extension",
        "path": "Coverage.extension",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "url"
            }
          ],
          "rules": "closed"
        },
        "max": "7"
      },
      {
        "id": "Coverage.extension:einlesedatumKarte",
        "path": "Coverage.extension",
        "sliceName": "einlesedatumKarte",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://fhir.de/StructureDefinition/gkv/einlesedatum-karte"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:BesonderePersonengruppe",
        "path": "Coverage.extension",
        "sliceName": "BesonderePersonengruppe",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://fhir.de/StructureDefinition/gkv/besondere-personengruppe"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:BesonderePersonengruppe.value[x]",
        "path": "Coverage.extension.value[x]",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:BesonderePersonengruppe.value[x].system",
        "path": "Coverage.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:BesonderePersonengruppe.value[x].version",
        "path": "Coverage.extension.value[x].version",
        "max": "0"
      },
      {
        "id": "Coverage.extension:BesonderePersonengruppe.value[x].code",
        "path": "Coverage.extension.value[x].code",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:BesonderePersonengruppe.value[x].display",
        "path": "Coverage.extension.value[x].display",
        "max": "0"
      },
      {
        "id": "Coverage.extension:BesonderePersonengruppe.value[x].userSelected",
        "path": "Coverage.extension.value[x].userSelected",
        "max": "0"
      },
      {
        "id": "Coverage.extension:DMPKennzeichen",
        "path": "Coverage.extension",
        "sliceName": "DMPKennzeichen",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://fhir.de/StructureDefinition/gkv/dmp-kennzeichen"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:DMPKennzeichen.value[x]",
        "path": "Coverage.extension.value[x]",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:DMPKennzeichen.value[x].system",
        "path": "Coverage.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:DMPKennzeichen.value[x].version",
        "path": "Coverage.extension.value[x].version",
        "max": "0"
      },
      {
        "id": "Coverage.extension:DMPKennzeichen.value[x].code",
        "path": "Coverage.extension.value[x].code",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:DMPKennzeichen.value[x].display",
        "path": "Coverage.extension.value[x].display",
        "max": "0"
      },
      {
        "id": "Coverage.extension:DMPKennzeichen.value[x].userSelected",
        "path": "Coverage.extension.value[x].userSelected",
        "max": "0"
      },
      {
        "id": "Coverage.extension:Versichertenart",
        "path": "Coverage.extension",
        "sliceName": "Versichertenart",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://fhir.de/StructureDefinition/gkv/versichertenart"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:Versichertenart.value[x]",
        "path": "Coverage.extension.value[x]",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:Versichertenart.value[x].system",
        "path": "Coverage.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:Versichertenart.value[x].version",
        "path": "Coverage.extension.value[x].version",
        "max": "0"
      },
      {
        "id": "Coverage.extension:Versichertenart.value[x].code",
        "path": "Coverage.extension.value[x].code",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:Versichertenart.value[x].display",
        "path": "Coverage.extension.value[x].display",
        "max": "0"
      },
      {
        "id": "Coverage.extension:Versichertenart.value[x].userSelected",
        "path": "Coverage.extension.value[x].userSelected",
        "max": "0"
      },
      {
        "id": "Coverage.extension:WOP",
        "path": "Coverage.extension",
        "sliceName": "WOP",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://fhir.de/StructureDefinition/gkv/wop"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:WOP.value[x]",
        "path": "Coverage.extension.value[x]",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:WOP.value[x].system",
        "path": "Coverage.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:WOP.value[x].version",
        "path": "Coverage.extension.value[x].version",
        "max": "0"
      },
      {
        "id": "Coverage.extension:WOP.value[x].code",
        "path": "Coverage.extension.value[x].code",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:WOP.value[x].display",
        "path": "Coverage.extension.value[x].display",
        "max": "0"
      },
      {
        "id": "Coverage.extension:WOP.value[x].userSelected",
        "path": "Coverage.extension.value[x].userSelected",
        "max": "0"
      },
      {
        "id": "Coverage.extension:zuzahlungsstatus",
        "path": "Coverage.extension",
        "sliceName": "zuzahlungsstatus",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://fhir.de/StructureDefinition/gkv/zuzahlungsstatus"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:zuzahlungsstatus.extension",
        "path": "Coverage.extension.extension",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "url"
            }
          ],
          "description": "Extensions are always sliced by (at least) url",
          "rules": "closed"
        }
      },
      {
        "id": "Coverage.extension:zuzahlungsstatus.extension:status",
        "path": "Coverage.extension.extension",
        "sliceName": "status",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:zuzahlungsstatus.extension:status.value[x]",
        "path": "Coverage.extension.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:SKT-Zusatzangabe",
        "path": "Coverage.extension",
        "sliceName": "SKT-Zusatzangabe",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_VoS_SKT"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:SKT-Zusatzangabe.value[x]",
        "path": "Coverage.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "Coverage.extension:SKT-Zusatzangabe.value[x]:valueString",
        "path": "Coverage.extension.value[x]",
        "sliceName": "valueString",
        "type": [
          {
            "code": "string"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.identifier",
        "path": "Coverage.identifier",
        "short": "Primaerer Identifier der Versicherung",
        "definition": "Ein gesetzliches Versicherungsverhaeltnis sollte stets durch die eindeutige 30-stellige Versichertennummer identifiziert werden. Ist diese nicht bekannt, so wird die 10-stellige VersichertenID statt dessen verwendet.",
        "max": "0",
        "mustSupport": true
      },
      {
        "id": "Coverage.status",
        "path": "Coverage.status",
        "fixedCode": "active",
        "mustSupport": true
      },
      {
        "id": "Coverage.type",
        "path": "Coverage.type",
        "short": "Kostenträgertyp",
        "definition": "Art des Kostenträgers",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "https://fhir.kbv.de/ValueSet/KBV_VS_FOR_Payor_type"
        }
      },
      {
        "id": "Coverage.type.coding",
        "path": "Coverage.type.coding",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Coverage.type.coding.system",
        "path": "Coverage.type.coding.system",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.type.coding.version",
        "path": "Coverage.type.coding.version",
        "max": "0"
      },
      {
        "id": "Coverage.type.coding.code",
        "path": "Coverage.type.coding.code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.type.coding.display",
        "path": "Coverage.type.coding.display",
        "max": "0"
      },
      {
        "id": "Coverage.type.coding.userSelected",
        "path": "Coverage.type.coding.userSelected",
        "max": "0"
      },
      {
        "id": "Coverage.type.text",
        "path": "Coverage.type.text",
        "max": "0"
      },
      {
        "id": "Coverage.policyHolder",
        "path": "Coverage.policyHolder",
        "max": "0"
      },
      {
        "id": "Coverage.subscriber",
        "path": "Coverage.subscriber",
        "max": "0"
      },
      {
        "id": "Coverage.subscriberId",
        "path": "Coverage.subscriberId",
        "max": "0"
      },
      {
        "id": "Coverage.beneficiary",
        "path": "Coverage.beneficiary",
        "short": "Begünstigte Person",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Patient|2.2.0"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.beneficiary.reference",
        "path": "Coverage.beneficiary.reference",
        "definition": "An dieser Stelle wird die Referenz zum Patienten hinterlegt.",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.beneficiary.type",
        "path": "Coverage.beneficiary.type",
        "max": "0"
      },
      {
        "id": "Coverage.beneficiary.identifier",
        "path": "Coverage.beneficiary.identifier",
        "max": "0"
      },
      {
        "id": "Coverage.beneficiary.display",
        "path": "Coverage.beneficiary.display",
        "max": "0"
      },
      {
        "id": "Coverage.dependent",
        "path": "Coverage.dependent",
        "max": "0"
      },
      {
        "id": "Coverage.relationship",
        "path": "Coverage.relationship",
        "max": "0"
      },
      {
        "id": "Coverage.period",
        "path": "Coverage.period",
        "constraint": [
          {
            "key": "-for-begrenzungDate",
            "human": "Beschränkung auf die Angaben JJJJ-MM-TT",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "end.toString().length() = 10"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.period.start",
        "path": "Coverage.period.start",
        "max": "0"
      },
      {
        "id": "Coverage.period.end",
        "path": "Coverage.period.end",
        "short": "Versicherungsschutz Ende",
        "definition": "Angabe zum Versicherungsschutz Ende",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.payor",
        "path": "Coverage.payor",
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.reference",
        "path": "Coverage.payor.reference",
        "max": "0"
      },
      {
        "id": "Coverage.payor.type",
        "path": "Coverage.payor.type",
        "max": "0"
      },
      {
        "id": "Coverage.payor.identifier",
        "path": "Coverage.payor.identifier",
        "short": "Institutionskennzeichen (IKs)",
        "definition": "Dieses Feld enthält das Institutionskennzeichen (IK) der zuständigen Krankenkasse z.B. laut elektronischer Gesundheitskarte (eGK). Siehe hierzu die Übertragungsregel nach der 'Technische Anlage zur Anlage 4a BMV-Ä' Kapitel 2.2 'USE-CASES.",
        "type": [
          {
            "code": "Identifier",
            "profile": [
              "http://fhir.de/StructureDefinition/identifier-iknr"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.extension",
        "path": "Coverage.payor.identifier.extension",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "url"
            }
          ],
          "description": "Extensions are always sliced by (at least) url",
          "rules": "closed"
        }
      },
      {
        "id": "Coverage.payor.identifier.extension:alternativeID",
        "path": "Coverage.payor.identifier.extension",
        "sliceName": "alternativeID",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.kbv.de/StructureDefinition/KBV_EX_FOR_Alternative_IK"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.extension:alternativeID.extension",
        "path": "Coverage.payor.identifier.extension.extension",
        "max": "0"
      },
      {
        "id": "Coverage.payor.identifier.extension:alternativeID.value[x]",
        "path": "Coverage.payor.identifier.extension.value[x]",
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.extension:alternativeID.value[x]:valueIdentifier",
        "path": "Coverage.payor.identifier.extension.value[x]",
        "sliceName": "valueIdentifier",
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.extension:alternativeID.value[x]:valueIdentifier.system",
        "path": "Coverage.payor.identifier.extension.value[x].system",
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.extension:alternativeID.value[x]:valueIdentifier.value",
        "path": "Coverage.payor.identifier.extension.value[x].value",
        "constraint": [
          {
            "key": "-for-laengeIK",
            "human": "Die IK-Nummer muss 9-stellig numerisch sein.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "matches('^[0-9]{9}$')"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.type.text",
        "path": "Coverage.payor.identifier.type.text",
        "max": "0"
      },
      {
        "id": "Coverage.payor.identifier.system",
        "path": "Coverage.payor.identifier.system",
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.value",
        "path": "Coverage.payor.identifier.value",
        "constraint": [
          {
            "key": "-for-laengeIK",
            "human": "Die IK-Nummer muss 9-stellig numerisch sein.",
            "source": "https://fhir.kbv.de/StructureDefinition/KBV_PR_VoS_Coverage",
            "severity": "error",
            "expression": "matches('^[0-9]{9}$')"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Coverage.payor.identifier.period",
        "path": "Coverage.payor.identifier.period",
        "max": "0"
      },
      {
        "id": "Coverage.payor.identifier.assigner",
        "path": "Coverage.payor.identifier.assigner",
        "max": "0"
      },
      {
        "id": "Coverage.payor.display",
        "path": "Coverage.payor.display",
        "short": "Kostenträgername zur Bedruckung",
        "definition": "Diese Angabe beinhaltet den Bedruckungsnamen des Kostenträgers. Der korrekte Name ergibt sich aus den definierten Bedruckungsregeln laut 'Technische Anlage zur Anlage 4a BMV-Ä' Kapitel '2.3 Bedruckungs des Personalienfeldes und des verkürzten Personalienfeldes'.",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Coverage.class",
        "path": "Coverage.class",
        "max": "0"
      },
      {
        "id": "Coverage.order",
        "path": "Coverage.order",
        "max": "0"
      },
      {
        "id": "Coverage.network",
        "path": "Coverage.network",
        "max": "0"
      },
      {
        "id": "Coverage.costToBeneficiary",
        "path": "Coverage.costToBeneficiary",
        "max": "0"
      },
      {
        "id": "Coverage.subrogation",
        "path": "Coverage.subrogation",
        "max": "0"
      },
      {
        "id": "Coverage.contract",
        "path": "Coverage.contract",
        "max": "0"
      }
    ]
  }
}
